/*
 * Copyright 2025 Linumiz
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#ifndef ZEPHYR_DRIVERS_CHARGER_MP2733_H_
#define ZEPHYR_DRIVERS_CHARGER_MP2733_H_


#define MP2733_INP_I_LIM		0x00
#define MP2733_INP_V_LIM		0x01
#define MP2733_NTC_CONF_THERM_REGUL	0x02
#define MP2733_ADC_CTRL_OTG_CONF	0x03
#define MP2733_CHRG_CTRL_VSYS_CONF 	0x04
#define MP2733_CCHRG_I_CONF		0x05
#define MP2733_PRE_CHRG_TERM_I 		0x06
#define MP2733_CCHRG_V_REGUL		0x07
#define MP2733_TIMER_CONF		0x08
#define MP2733_BANDGAP_SETTING		0x09
#define MP2733_BATTFET_CONF		0x0a
#define MP2733_INT_MASK_USB_DETCN	0x0b
#define MP2733_STATUS_IND		0x0c
#define MP2733_FAULT_IND		0x0d
#define MP2733_BATT_V_ADC		0x0e
#define MP2733_SYS_V_ADC		0x0f
#define MP2733_NTC_V_ADC		0x10
#define MP2733_INPUT_V_ADC		0x11
#define MP2733_CHRG_I_ADC		0x12
#define MP2733_INPUT_I_ADC		0x13
#define MP2733_PWR_MGMT			0x14
#define MP2733_DPM_MASK			0x15
#define MP2733_JEITA_CONF		0x16
#define MP2733_PART_INFO		0x17

/*REG0x00_Input_Current_Limit */
#define MP2733_INP_I_LIM_CONFIG_MASK	GENMASK(5, 0)
#define MP2733_INP_I_LIM_MIN_UA		100000
#define MP2733_INP_I_LIM_MAX_UA		3250000
#define MP2733_INP_I_LIM_DEF_UA		500000
#define MP2733_INP_I_LIM_OFFSET		100000
#define MP2733_INP_I_LIM_STEP_UA  	50000

/*REG0x01_Input_Voltage_Regulation */
#define MP2733_REG_RESET		BIT(7)
#define MP2733_INP_V_OTG_LIM		1000000
#define MP2733_INP_V_LIM_CONFIG_MASK	GENMASK(6, 0)	
#define MP2733_INP_V_LIM_MIN_UV		3700000
#define MP2733_INP_V_LIM_MAX_UV		15200000
#define MP2733_INP_V_LIM_DEF_UV		4300000
#define MP2733_INP_V_LIM_OFFSET		3700000
#define MP2733_INP_V_LIM_STEP_UV	100000

/*REG0x02_NTC_Config_&_Thermal_Regulation */
#define MP2733_NTC_JEITA_TYPE		BIT(6)
#define MP2733_NTC_OTG_EN 		BIT(5)
#define MP2733_NTC_CHG_EN		BIT(4)
#define MP2733_TEMP_REG			GENMASK(3, 2)
#define MP2733_NTC_OPT			BIT(1)
#define MP2733_AICO_EN			BIT(0)

/*REG0x03_ADC_Control_&_OTG_Configuration */
#define MP2733_ADC_START 		BIT(7)
#define MP2733_ADC_RATE 		BIT(6)
#define MP2733_VIN_DSCHG_V_CONFIG_MASK	GENMASK(5, 3)
#define MP2733_VIN_DSCHG_V_MIN_UV	4800000
#define MP2733_VIN_DSCHG_V_MAX_UV	5500000
#define MP2733_VIN_DSCHG_V_DEF_UV	5000000
#define MP2733_VIN_DSCHG_V_OFFSET	4800000
#define MP2733_VIN_DSCHG_V_STEP_UV	100000

#define MP2733_IIN_DSCHG_I_CONFIG_MASK	GENMASK(2, 0)
#define MP2733_IIN_DSCHG_I_DEF_MASK	0
#define MP2733_IIN_DSCHG_I_MIN_UA	500000
#define MP2733_IIN_DSCHG_I_MAX_UA	3000000
#define MP2733_IIN_DSCHG_I_DEF_UA	500000

#define MP2733_IIN_DSCHG_I_DEF_8A	800000
#define MP2733_IIN_DSCHG_I_DEF_11A	1100000
#define MP2733_IIN_DSCHG_I_DEF_15A	1500000
#define MP2733_IIN_DSCHG_I_DEF_18A	1800000
#define MP2733_IIN_DSCHG_I_DEF_21A	2100000
#define MP2733_IIN_DSCHG_I_DEF_24A	2400000
#define MP2733_IIN_DSCHG_I_DEF_30A	3000000

#define MP2733_IIN_DSHCG_I_500_MA	0
#define MP2733_IIN_DSCHG_I_800_MA	BIT(0)
#define MP2733_IIN_DSCHG_I_1100_MA	BIT(1)
#define MP2733_IIN_DSCHG_I_1500_MA	BIT(1) | BIT(0)
#define MP2733_IIN_DSCHG_I_1800_MA	BIT(2)
#define MP2733_IIN_DSCHG_I_2100_MA	BIT(2) | BIT(0)
#define MP2733_IIN_DSCHG_I_2400_MA	BIT(2) | BIT(1)
#define MP2733_IIN_DSCHG_I_3000_MA	BIT(2) | BIT(1) | BIT(0)

/*REG0x04_Charge_Control_and_Vsys_Config */
#define MP2733_CHRG_ENABLE		BIT(0)
#define MP2733_CHRG_RESERVED		BIT(1)
#define MP2733_CHRG_OTG			BIT(1) | BIT(0)
#define MP2733_CHRG_CONFIG_MASK 	GENMASK(5, 4)
#define MP2733_CHRG_CONFIG_OTG_MODE	BIT(5) | BIT(4)
#define MP2733_CHRG_CONFIG_SHIFT	4
#define MP2733_VSYS_CONFIG_MASK		GENMASK(3, 1)
#define MP2733_VSYS_DEF_MASK		BIT(2) | BIT (0) 
#define MP2733_VSYS_MIN_V_MIN_UV	3000000
#define MP2733_VSYS_MIN_V_MAX_UV	3750000
#define MP2733_VSYS_MIN_V_DEF_UV	3600000
#define MP2733_VSYS_MIN_V_STEP_UV	3000000

/*REG0x05_Charge_Current_configuration */
#define MP2733_CCHRG_I_CONFIG_MASK	GENMASK(6, 0)
#define MP2733_CCHRG_I_MIN_UA 		320000
#define MP2733_CCHRG_I_MAX_UA 		4520000
#define MP2733_CCHRG_I_DEF_UA 		1840000
#define MP2733_CCHRG_I_OFFSET		320000
#define MP2733_CCHRG_I_STEP_UA		40000

/*REG0x06_Pre_Charege_&_Term_Charge */
#define MP2733_PRECHRG_CONFIG_MASK	GENMASK(7, 4)
#define MP2733_PRECHRG_I_MIN_UA		150000
#define MP2733_PRECHRG_I_MAX_UA		750000
#define MP2733_PRECHRG_I_DEF_UA		230000
#define MP2733_PRECHRG_I_OFFSET		150000
#define MP2733_PRECHRG_I_STEP_UA	40000
#define MP2733_TERMCHRG_CONFIG_MASK	GENMASK(3, 0)
#define MP2733_TERMCHRG_I_MIN_UA	120000
#define MP2733_TERMCHRG_I_MAX_UA	750000
#define MP2733_TERMCHRG_I_DEF_UA	200000
#define MP2733_TERMCHRG_I_OFFSET	120000
#define MP2733_TERMCHRG_I_STEP_UA	40000

/*REG0x07_Charge_Voltage_Regulation */
#define MP2733_VBATT_V_UVLO		3000000
#define MP2733_VBATT_V_CONFIG_MASK	GENMASK(7, 1)
#define MP2733_VBATT_V_MIN_UV 		3400000
#define MP2733_VBATT_V_MAX_UV 		4670000
#define MP2733_VBATT_V_DEF_UV 		4200000
#define MP2733_VBATT_V_OFFSET		3400000
#define MP2733_VBATT_V_STEP_UV		10000

/* REG0x08_Timer_Config */
#define MP2733_EN_TERM			BIT(7)
#define MP2733_EN_ADC_DSCHG		BIT(6)
#define MP2733_WATCHDOG_TIMER_MASK	GENMASK(5, 4)
#define MP2733_WATCHDOG_TIMER_RESET	BIT(3)
#define MP2733_CCHRG_TIMER		GENMASK(2, 1)
#define MP2733_EN_TIMER			BIT(0)	
#define MP2733_WATCHDOG_TIMER_DIS	0

/* REG0x0a_Battfet_Config */
#define MP2733_BATTFET_DIS		BIT(5)

/* REG0x0b_Int_Mask_USB_Detection */
#define MP2733_USB_DET_EN		BIT(5)	


/* REG0x0c_Status_Indicator */
#define MP2733_STATUS_IND_VIN_MASK 	GENMASK(7, 5)
#define MP2733_USB_UNKNOWN		BIT(5)
#define MP2733_USB_APPLE_1A		BIT(6)
#define MP2733_USB_APPLE_2_1A		BIT(6) | BIT(5)
#define MP2733_USB_APPLE_2_4A		BIT(7)
#define MP2733_USB_SDP			BIT(7) | BIT(5)
#define MP2733_USB_CDP			BIT(7) | BIT(6)
#define MP2733_USB_DCP			BIT(7) | BIT (6) | BIT (5)
#define MP2733_OTG_MODE			BIT(7) | BIT (6) | BIT (5)

#define MP2733_CHRG_STATUS		GENMASK(4, 3)
#define MP2733_NOT_CHRG			0
#define MP2733_TRICKLE_CHRG		1
#define MP2733_CONST_CHRG		2
#define MP2733_CHRG_DONE		3

#define MP2733_NTCFLOAT_STATUS_BIT	BIT(2)
#define MP2733_THERM_STATUS_BIT		BIT(1)
#define MP2733_VSYS_STATUS_BIT		0

/* REG0x0d_Fault_Indicator */
#define MP2733_WATCHDOG_FAULT		BIT(7)
#define MP2733_OTG_FAULT		BIT(6)
#define MP2733_INPUT_FAULT		BIT(5)
#define MP2733_THERMSHUT_FAULT		BIT(4)
#define MP2733_BAT_FAULT		BIT(3)
#define MP2733_NTC_FAULT		GENMASK(2, 0)
#define MP2733_TEMP_NORMAL		0x00
#define MP2733_TEMP_WARM 		BIT(1)
#define MP2733_TEMP_COOL		BIT(1) | BIT(0)
#define MP2733_TEMP_COLD		BIT(2) | BIT(0)
#define MP2733_TEMP_HOT			BIT(2) | BIT(1)

/* REG0x0e_Battery_Voltage_ADC */
#define MP2733_BATT_V_ADC_STEP_UV	20000

/* REG0x0f_System_Voltage_ADC */
#define MP2733_SYS_V_ADC_STEP_UV	20000

/* REG0x11_Input_Voltage_ADC */
#define MP2733_VINP_V_ADC_STEP_UV	60000

/* REG0x12_Charge_Current_ADC */
#define MP2733_CHRG_I_ADC_STEP_UA	17500		

/* REG0x13_Input_Current_ADC */
#define MP2733_INP_I_ADC_STEP_UA	13300		



#endif /* ZEPHYR_DRIVERS_CHARGER_MP2733_H_ */
