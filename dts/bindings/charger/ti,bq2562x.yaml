# Copyright 2025 Linumiz
# SPDX-License-Identifier: Apache-2.0

description: |
  BQ25620/BQ25622 is a highly integrated switch-mode buck-boost charger for 1-4 cell
  Li-ion batteries and Li-polymer batteries. The device charges a battery from a
  wide range of input sources including legacy USB adapters to high voltage USB
  PD adapters and traditional barrel adapters.

  The device has a single child node for the charger. For example:

  bq25620@6b {
    compatible = "ti,bq2562x";
    reg = <0x6b>;

    ce-gpios = <&gpioa 3 GPIO_ACTIVE_LOW>;
    watchdog-timeout-ms = <50000>;
    constant-charge-current-max-microamp = <1040000>;
    constant-charge-voltage-max-microvolt = <4200000>;
    precharge-current-microamp = <100000>;
    charge-term-current-microamp = <60000>;
    input-current-limit-microamp = <1000000>;
    input-voltage-limit-microvolt = <4600000>;
  };

compatible: "ti,bq2562x"

include: [battery.yaml, i2c-device.yaml]

properties:
  constant-charge-current-max-microamp:
    type: int
    default: 1040000

  constant-charge-voltage-max-microvolt:
    type: int
    default: 4200000

  precharge-current-microamp:
    type: int
    default: 100000

  charge-term-current-microamp:
    type: int
    default: 60000

  ce-gpios:
    type: phandle-array
    description: Active low, charge enable pin

  int-gpios:
    type: phandle-array
    description: Interrupt pin

# TI/Chip specific
  ti,min-sys-voltage-microvolt:
    type: int
    default: 3600000
    description: |
      Minimum system voltage in micro volts with a 100000 micro volt step.

  ti,input-voltage-limit-microvolt:
    type: int
    default: 4800000
    description: |
      Minimum input voltage limit in micro volts with a 100000 micro volt step.

  ti,input-current-limit-microamp:
    type: int
    default: 4000000
    description: |
      Maximum input current limit in micro amps with a 100000 micro amp step.

  ti,thermal-regulation-threshold:
    type: int
    default: 1
    enum:
      - 0
      - 1
    description: |
      Charger control thermal regulation threshold
      0: 60 degree celcius
      1: 120 degree celcius

  ti,switching-converter-freq:
    type: int
    default: 0
    enum:
      - 0
      - 1
      - 2
    description: |
      Charger step-down converter switching frequency
      0: Nominal, 1.5 MHz
      1: -10%, 1.35 MHz
      2: +10%, 1.65 MHz

  ti,switching-converter-strength:
    type: int
    default: 0
    enum:
      - 0
      - 1
      - 3
    description: |
      Charger step-down converter drive strength for efficiency vs EMI
      0: weak
      1: normal
      3: strong
