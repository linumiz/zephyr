# Copyright (c) 2024 Infineon Technologies AG
# SPDX-License-Identifier: Apache-2.0

menu "Tricore Options"
	depends on TRICORE

config ARCH
	string
	default "tricore"

config CPU_TC162
	select ARCH_HAS_NOCACHE_MEMORY_SUPPORT
	select CPU_HAS_DCACHE
	select CPU_HAS_ICACHE
	select CPU_CACHE_INCOHERENT
	imply FPU
	bool

config CPU_TC18
	select ARCH_HAS_NOCACHE_MEMORY_SUPPORT
	select CPU_HAS_DCACHE
	select CPU_HAS_ICACHE
	select CPU_CACHE_INCOHERENT
	imply FPU
	bool

config TRICORE_CSA_COUNT
	int "Number of Context Save Areas allocated"
	default 256

config TRICORE_CORE_ID
	int "Core ID of the core if running in AMP mode"
	default 0
	help
		Core ID of the TriCore core

config TRICORE_RESET_TRAMPOLINE
	bool "Enable trampoline to jump to cached address"
	default y
	help
		Enable startup trampoline function which jumps from
		any address (e.g. no cached) to the actual startup
		function.

menu "Tricore Processor Options"

config TRICORE_MPU
	bool "Tricore MPU Support"
	select THREAD_STACK_INFO
	select CPU_HAS_MPU
	select MPU
	select MPU_REQUIRES_POWER_OF_TWO_ALIGNMENT
	select ARCH_HAS_USERSPACE
	select ARCH_HAS_STACK_PROTECTION
	select ARCH_MEM_DOMAIN_SUPPORTS_ISOLATED_STACKS
#	select ARCH_MEM_DOMAIN_SYNCHRONOUS_API if USERSPACE
	select ARCH_MEM_DOMAIN_DATA if USERSPACE
	select SRAM_REGION_PERMISSIONS
#	select THREAD_LOCAL_STORAGE if USERSPACE
	help
	  Tricore implements Memory Protection Unit.

if TRICORE_MPU
config TRICORE_MPU_CODE_REGIONS
	int "Number of MPU code regions"
	default 8
	help
	  Number of code regions supported by the MPU.

config TRICORE_MPU_DATA_REGIONS
	int "Number of MPU data regions"
	default 16
	help
	  Number of data regions supported by the MPU.

config TRICORE_MPU_PROTECTION_SETS
	int "Number of MPU protection sets"
	default 4
	help
	  Number of protection sets supported by the MPU.
endif # TRICORE_MPU

config MPU_STACK_GUARD
	def_bool y
	depends on HW_STACK_PROTECTION

config MPU_STACK_GUARD_MIN_SIZE
	int "Stack Guard area size"
	depends on MPU_STACK_GUARD
	default 512
	help
	  The Hardware Stack Protection implements a guard area at the bottom
	  of the stack using the MPU to catch stack overflows by marking that
	  guard area not accessible.

if CPU_TC18
config CPU_HAS_TRICORE_VIRTUALIZATION
	bool
	default n

config TRICORE_VIRTUALIZATION
	bool "Tricore Virtualization"
	default n

config TRICORE_VM_ID
	int "Tricore Virtual Machine ID"
	depends on TRICORE_VIRTUALIZATION
	default 0
endif

endmenu

config DCACHE_LINE_SIZE
	default 32

config ICACHE_LINE_SIZE
	default 32

config GEN_ISR_TABLES
	default y

config GEN_IRQ_VECTOR_TABLE
	default n

config NUM_IRQ_PRIORITIES
	int
	default 256

endmenu
